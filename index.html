<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebOS v0.1 - Professional Core</title>
    <style>
        :root {
            --accent: #0078d4;
            --glass: rgba(25, 25, 30, 0.85);
            --border: rgba(255, 255, 255, 0.15);
            --text: #ffffff;
            --font: 'Segoe UI', system-ui, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font);
            background: #000;
            color: var(--text);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            user-select: none;
        }

        #desktop {
            width: 100%;
            height: calc(100% - 48px);
            background: url('https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1920&q=80') center/cover;
            position: relative;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, 90px);
            grid-auto-rows: 100px;
            gap: 15px;
        }

        /* --- VENTANAS --- */
        .window {
            position: absolute;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 10px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-width: 250px;
            min-height: 150px;
        }

        .titlebar {
            height: 35px;
            background: rgba(255,255,255,0.05);
            display: flex;
            align-items: center;
            padding: 0 12px;
            cursor: default;
        }

        .win-title { flex: 1; font-size: 13px; font-weight: 500; }
        .win-controls { display: flex; gap: 8px; }
        .win-btn { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; }
        .close { background: #ff5f57; }
        .max { background: #28c840; }
        .min { background: #febc2e; }

        .content { flex: 1; overflow: auto; background: rgba(0,0,0,0.2); position: relative; }

        /* --- COMPONENTES UI --- */
        #taskbar {
            height: 48px;
            width: 100%;
            background: rgba(15, 15, 20, 0.95);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            padding: 0 10px;
            border-top: 1px solid var(--border);
            position: fixed; bottom: 0; z-index: 99999;
        }

        .start-btn {
            width: 36px; height: 36px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 4px; cursor: pointer; color: var(--accent);
            font-size: 20px; transition: 0.2s;
        }

        .start-btn:hover { background: rgba(255,255,255,0.1); }

        #start-menu {
            position: absolute; bottom: 55px; left: 10px;
            width: 350px; height: 450px;
            background: var(--glass); backdrop-filter: blur(30px);
            border: 1px solid var(--border); border-radius: 12px;
            display: none; padding: 20px; z-index: 100000;
        }

        .desktop-icon {
            display: flex; flex-direction: column; align-items: center;
            cursor: pointer; padding: 10px; border-radius: 8px;
        }
        .desktop-icon:hover { background: rgba(255,255,255,0.1); }
        .icon-img { font-size: 32px; margin-bottom: 5px; }
        .icon-label { font-size: 12px; text-shadow: 1px 1px 2px #000; }

        /* --- MODAL NOVEDADES --- */
        #welcome-modal {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.7);
            display: flex; align-items: center; justify-content: center;
            z-index: 1000000;
        }

        .modal-box {
            background: var(--glass); padding: 30px;
            border-radius: 15px; border: 1px solid var(--border);
            width: 450px; text-align: center;
        }

        .resizer {
            position: absolute; width: 10px; height: 10px;
            right: 0; bottom: 0; cursor: nwse-resize;
        }

    </style>
</head>
<body>

    <div id="desktop"></div>

    <div id="welcome-modal">
        <div class="modal-box">
            <h2 style="color: var(--accent); margin-bottom: 15px;">Bienvenido a WebOS v0.1</h2>
            <ul style="text-align: left; font-size: 14px; margin-bottom: 20px; list-style: none;">
                <li>üöÄ <b>Multitarea:</b> Abre varias ventanas a la vez.</li>
                <li>üõ†Ô∏è <b>Ajustes:</b> Cambia el fondo de pantalla en tiempo real.</li>
                <li>üìù <b>Apps:</b> Bloc de notas, Navegador y Terminal funcionales.</li>
                <li>üìè <b>Resizing:</b> Ajusta el tama√±o de tus herramientas.</li>
            </ul>
            <button onclick="document.getElementById('welcome-modal').remove()" 
                style="background: var(--accent); color: white; border: none; padding: 10px 25px; border-radius: 5px; cursor: pointer;">
                Comenzar
            </button>
        </div>
    </div>

    <div id="start-menu">
        <h3 style="margin-bottom: 15px;">Aplicaciones</h3>
        <div id="menu-apps"></div>
    </div>

    <div id="taskbar">
        <div class="start-btn" id="start-btn">‚äû</div>
        <div id="running-tasks" style="flex: 1; display: flex; justify-content: center; gap: 10px;"></div>
        <div id="clock" style="font-size: 12px; width: 80px; text-align: right;">00:00:00</div>
    </div>

    <script>
        /**
         * WEBOS v0.1 CORE ENGINE
         */

        const APPS = [
            { id: 'browser', name: 'Duck Search', icon: 'üåê', url: 'https://duckduckgo.com' },
            { id: 'notes', name: 'Notas', icon: 'üìù', type: 'text' },
            { id: 'term', name: 'Terminal', icon: 'üíª', type: 'terminal' },
            { id: 'config', name: 'Ajustes', icon: '‚öôÔ∏è', type: 'settings' }
        ];

        class WebOS {
            constructor() {
                this.zIndex = 100;
                this.init();
            }

            init() {
                this.renderDesktop();
                this.setupEvents();
                this.updateClock();
                setInterval(() => this.updateClock(), 1000);
            }

            renderDesktop() {
                const desktop = document.getElementById('desktop');
                const menuApps = document.getElementById('menu-apps');

                APPS.forEach(app => {
                    // Escritorio
                    const icon = document.createElement('div');
                    icon.className = 'desktop-icon';
                    icon.innerHTML = `<div class="icon-img">${app.icon}</div><div class="icon-label">${app.name}</div>`;
                    icon.ondblclick = () => this.createWindow(app);
                    desktop.appendChild(icon);

                    // Men√∫ Inicio
                    const mItem = document.createElement('div');
                    mItem.style.cssText = "padding:10px; cursor:pointer; border-radius:5px;";
                    mItem.innerHTML = `${app.icon} ${app.name}`;
                    mItem.onclick = () => { this.createWindow(app); this.toggleStart(); };
                    mItem.onmouseover = () => mItem.style.background = "rgba(255,255,255,0.1)";
                    mItem.onmouseout = () => mItem.style.background = "transparent";
                    menuApps.appendChild(mItem);
                });
            }

            createWindow(app) {
                const id = `win-${Date.now()}`;
                const win = document.createElement('div');
                win.id = id;
                win.className = 'window';
                win.style.width = '600px'; win.style.height = '400px';
                win.style.top = '100px'; win.style.left = '150px';
                win.style.zIndex = ++this.zIndex;

                win.innerHTML = `
                    <div class="titlebar" onmousedown="OS.focusWin('${id}'); OS.dragStart(event, '${id}')">
                        <span class="win-title">${app.icon} ${app.name}</span>
                        <div class="win-controls">
                            <div class="win-btn min" onclick="OS.minimize('${id}')"></div>
                            <div class="win-btn max" onclick="OS.maximize('${id}')"></div>
                            <div class="win-btn close" onclick="document.getElementById('${id}').remove()"></div>
                        </div>
                    </div>
                    <div class="content">${this.getAppContent(app)}</div>
                    <div class="resizer" onmousedown="OS.resizeStart(event, '${id}')"></div>
                `;

                document.getElementById('desktop').appendChild(win);
            }

            getAppContent(app) {
                if (app.url) return `<iframe src="${app.url}" style="width:100%;height:100%;border:none;background:#fff;"></iframe>`;
                if (app.type === 'text') return `<textarea style="width:100%;height:100%;padding:20px;background:#1a1a1a;color:#fff;border:none;outline:none;resize:none;"></textarea>`;
                if (app.type === 'terminal') return `<div style="padding:15px;color:#0f0;font-family:monospace">WebOS Console...<br>C:\\Users\\Guest> <span contenteditable="true" style="outline:none"></span></div>`;
                if (app.type === 'settings') return `<div style="padding:20px"><h3>Fondo de Pantalla</h3><input type="text" placeholder="URL imagen..." onchange="document.getElementById('desktop').style.backgroundImage='url('+this.value+')'" style="width:100%;padding:8px;margin-top:10px;"></div>`;
                return '';
            }

            dragStart(e, id) {
                const el = document.getElementById(id);
                let x = e.clientX - el.offsetLeft;
                let y = e.clientY - el.offsetTop;
                const move = (ev) => { el.style.left = (ev.clientX - x) + 'px'; el.style.top = (ev.clientY - y) + 'px'; };
                const stop = () => { window.removeEventListener('mousemove', move); };
                window.addEventListener('mousemove', move);
                window.addEventListener('mouseup', stop);
            }

            resizeStart(e, id) {
                const el = document.getElementById(id);
                let w = el.offsetWidth, h = el.offsetHeight, x = e.clientX, y = e.clientY;
                const move = (ev) => { el.style.width = (w + ev.clientX - x) + 'px'; el.style.height = (h + ev.clientY - y) + 'px'; };
                const stop = () => { window.removeEventListener('mousemove', move); };
                window.addEventListener('mousemove', move);
                window.addEventListener('mouseup', stop);
            }

            focusWin(id) { document.getElementById(id).style.zIndex = ++this.zIndex; }
            toggleStart() { const m = document.getElementById('start-menu'); m.style.display = (m.style.display === 'block') ? 'none' : 'block'; }
            updateClock() { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }
            setupEvents() { document.getElementById('start-btn').onclick = () => this.toggleStart(); }
        }

        const OS = new WebOS();
    </script>
</body>
</html>
