<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebOS - Professional Desktop Environment</title>
    <style>
        :root {
            --accent: #0078d4;
            --bg-glass: rgba(25, 25, 25, 0.7);
            --border-glass: rgba(255, 255, 255, 0.15);
            --text-main: #ffffff;
            --taskbar-bg: rgba(15, 15, 15, 0.85);
            --font-stack: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-stack);
            background: url('https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            overflow: hidden;
            color: var(--text-main);
            user-select: none;
        }

        /* --- DESKTOP --- */
        #desktop {
            width: 100vw;
            height: calc(100vh - 48px);
            position: relative;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, 100px);
            grid-template-rows: repeat(auto-fill, 110px);
            grid-auto-flow: column;
            gap: 10px;
            z-index: 1;
        }

        .desktop-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.2s;
            text-align: center;
            padding: 5px;
        }

        .desktop-item:hover { background: rgba(255, 255, 255, 0.15); }
        .desktop-item img { width: 48px; height: 48px; pointer-events: none; }
        .desktop-item span { font-size: 12px; margin-top: 8px; text-shadow: 1px 1px 3px rgba(0,0,0,0.8); }

        /* --- WINDOW SYSTEM --- */
        .window {
            position: absolute;
            background: var(--bg-glass);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--border-glass);
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-width: 250px;
            min-height: 150px;
            z-index: 10;
        }

        .window.minimized { display: none; }
        .window.maximized {
            width: 100% !important;
            height: calc(100% - 48px) !important;
            top: 0 !important;
            left: 0 !important;
            border-radius: 0;
        }

        .window-header {
            height: 40px;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            padding: 0 12px;
            cursor: default;
        }

        .window-title { flex: 1; font-size: 13px; font-weight: 500; display: flex; align-items: center; gap: 8px; }
        .window-controls { display: flex; gap: 8px; }

        .control-btn {
            width: 28px; height: 28px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 4px; cursor: pointer; transition: 0.2s;
        }
        .control-btn:hover { background: rgba(255, 255, 255, 0.1); }
        .close-btn:hover { background: #e81123 !important; }

        .window-body { flex: 1; position: relative; overflow: auto; background: rgba(0,0,0,0.2); }

        /* Resize Handle */
        .resizer {
            position: absolute;
            width: 15px; height: 15px;
            right: 0; bottom: 0;
            cursor: nwse-resize;
            background: linear-gradient(135deg, transparent 50%, rgba(255,255,255,0.2) 50%);
        }

        /* --- TASKBAR --- */
        #taskbar {
            height: 48px;
            width: 100%;
            background: var(--taskbar-bg);
            backdrop-filter: blur(15px);
            position: absolute;
            bottom: 0;
            display: flex;
            align-items: center;
            padding: 0 10px;
            border-top: 1px solid var(--border-glass);
            z-index: 9999;
        }

        #start-btn {
            width: 36px; height: 36px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 4px; cursor: pointer; margin-right: 10px;
            transition: 0.2s; font-size: 20px; color: #38bdf8;
        }
        #start-btn:hover { background: rgba(255,255,255,0.1); }

        .taskbar-icons { flex: 1; display: flex; gap: 5px; justify-content: center; }
        .task-icon {
            width: 36px; height: 36px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 4px; cursor: pointer; border-bottom: 2px solid transparent;
        }
        .task-icon.active { border-bottom: 2px solid var(--accent); background: rgba(255,255,255,0.1); }

        .system-tray { display: flex; align-items: center; gap: 15px; font-size: 12px; padding-right: 10px; }

        /* --- START MENU --- */
        #start-menu {
            position: absolute;
            bottom: 58px; left: 10px;
            width: 400px; height: 500px;
            background: var(--bg-glass);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border-glass);
            border-radius: 12px;
            z-index: 10000;
            transform: translateY(600px);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            padding: 20px;
        }
        #start-menu.open { transform: translateY(0); }

        /* --- APPS STYLES --- */
        .app-iframe { width: 100%; height: 100%; border: none; }
        .notepad-area { width: 100%; height: 100%; background: #1e1e1e; color: #fff; padding: 15px; border: none; outline: none; resize: none; font-family: monospace; }
        .terminal-body { background: #000; color: #0f0; padding: 15px; height: 100%; font-family: 'Consolas', monospace; overflow-y: auto; }

    </style>
</head>
<body>

    <div id="desktop">
        </div>

    <div id="start-menu">
        <div style="margin-bottom: 20px; font-weight: bold; border-bottom: 1px solid var(--border-glass); padding-bottom: 10px;">Aplicaciones WebOS</div>
        <div id="app-list"></div>
    </div>

    <div id="taskbar">
        <div id="start-btn">‚äû</div>
        <div class="taskbar-icons" id="taskbar-icons"></div>
        <div class="system-tray">
            <span id="tray-wifi">üì∂</span>
            <span id="tray-sound">üîä</span>
            <div id="clock" style="text-align: right;">
                <div id="time">00:00:00</div>
                <div id="date" style="font-size: 10px; opacity: 0.7;">01/01/2024</div>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURACI√ìN DE APPS
        const APPS = {
            'browser': { name: 'Navegador', icon: 'üåê', type: 'iframe', content: 'https://www.bing.com' },
            'notepad': { name: 'Bloc de Notas', icon: 'üìù', type: 'html', content: '<textarea class="notepad-area" placeholder="Empieza a escribir..."></textarea>' },
            'terminal': { name: 'Terminal', icon: 'üíª', type: 'terminal', content: '' },
            'calc': { name: 'Calculadora', icon: 'üßÆ', type: 'iframe', content: 'https://www.desmos.com/scientific?lang=es' },
            'files': { name: 'Archivos', icon: 'üìÇ', type: 'html', content: '<div style="padding:20px">Sistema de archivos de WebOS v1.0<br><br>> Documentos<br>> Im√°genes<br>> Sistema</div>' },
            'settings': { name: 'Configuraci√≥n', icon: '‚öôÔ∏è', type: 'html', content: '<div style="padding:20px">Personalizaci√≥n de Escritorio<br><br><button onclick="changeWallpaper()">Cambiar Fondo</button></div>' }
        };

        let activeWindows = [];
        let focusedWindow = null;
        let zIndexBase = 100;

        // INICIALIZACI√ìN
        function init() {
            const desktop = document.getElementById('desktop');
            const appList = document.getElementById('app-list');

            Object.keys(APPS).forEach(key => {
                // Iconos escritorio
                const item = document.createElement('div');
                item.className = 'desktop-item';
                item.innerHTML = `<span style="font-size:32px">${APPS[key].icon}</span><span>${APPS[key].name}</span>`;
                item.onclick = () => createWindow(key);
                desktop.appendChild(item);

                // Start menu items
                const sItem = document.createElement('div');
                sItem.className = 'desktop-item';
                sItem.style.flexDirection = 'row';
                sItem.style.justifyContent = 'flex-start';
                sItem.style.width = '100%';
                sItem.style.padding = '10px';
                sItem.innerHTML = `<span style="margin-right:15px">${APPS[key].icon}</span><span>${APPS[key].name}</span>`;
                sItem.onclick = () => { createWindow(key); toggleStartMenu(); };
                appList.appendChild(sItem);
            });

            updateTime();
            setInterval(updateTime, 1000);
        }

        // SISTEMA DE VENTANAS
        function createWindow(appId) {
            const app = APPS[appId];
            const winId = 'win-' + Math.random().toString(36).substr(2, 9);
            
            const win = document.createElement('div');
            win.id = winId;
            win.className = 'window';
            win.style.width = '600px';
            win.style.height = '400px';
            win.style.top = (50 + (activeWindows.length * 20)) + 'px';
            win.style.left = (50 + (activeWindows.length * 20)) + 'px';
            win.style.zIndex = ++zIndexBase;

            win.innerHTML = `
                <div class="window-header" onmousedown="dragWindow('${winId}', event)">
                    <div class="window-title"><span>${app.icon}</span> ${app.name}</div>
                    <div class="window-controls">
                        <div class="control-btn" onclick="minimizeWindow('${winId}')">‚îÄ</div>
                        <div class="control-btn" onclick="maximizeWindow('${winId}')">‚óª</div>
                        <div class="control-btn close-btn" onclick="closeWindow('${winId}')">‚úï</div>
                    </div>
                </div>
                <div class="window-body">
                    ${app.type === 'iframe' ? `<iframe src="${app.content}" class="app-iframe"></iframe>` : app.content}
                    ${app.type === 'terminal' ? `<div class="terminal-body">WebOS Terminal v1.0<br>Ready...<br><br>C:\\Users\\Guest> <span contenteditable="true" style="outline:none"></span></div>` : ''}
                </div>
                <div class="resizer" onmousedown="resizeWindow('${winId}', event)"></div>
            `;

            document.body.appendChild(win);
            activeWindows.push({ id: winId, appId: appId });
            updateTaskbar();
            focusWindow(winId);
        }

        // DRAG & DROP LOGIC
        function dragWindow(winId, e) {
            const win = document.getElementById(winId);
            if (win.classList.contains('maximized')) return;
            
            focusWindow(winId);
            let pos1 = 0, pos2 = 0, pos3 = e.clientX, pos4 = e.clientY;
            
            document.onmousemove = (e) => {
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                win.style.top = (win.offsetTop - pos2) + "px";
                win.style.left = (win.offsetLeft - pos1) + "px";
            };
            
            document.onmouseup = () => {
                document.onmousemove = null;
                document.onmouseup = null;
            };
        }

        // RESIZE LOGIC
        function resizeWindow(winId, e) {
            e.preventDefault();
            const win = document.getElementById(winId);
            const startWidth = win.offsetWidth;
            const startHeight = win.offsetHeight;
            const startX = e.clientX;
            const startY = e.clientY;

            document.onmousemove = (e) => {
                const w = startWidth + (e.clientX - startX);
                const h = startHeight + (e.clientY - startY);
                if (w > 200) win.style.width = w + 'px';
                if (h > 150) win.style.height = h + 'px';
            };

            document.onmouseup = () => {
                document.onmousemove = null;
            };
        }

        // WINDOW CONTROLS
        function closeWindow(winId) {
            document.getElementById(winId).remove();
            activeWindows = activeWindows.filter(w => w.id !== winId);
            updateTaskbar();
        }

        function maximizeWindow(winId) {
            document.getElementById(winId).classList.toggle('maximized');
        }

        function minimizeWindow(winId) {
            document.getElementById(winId).classList.add('minimized');
        }

        function focusWindow(winId) {
            document.querySelectorAll('.window').forEach(w => w.style.zIndex = 10);
            const win = document.getElementById(winId);
            win.style.zIndex = ++zIndexBase;
            win.classList.remove('minimized');
            updateTaskbar();
        }

        // UI HELPERS
        function toggleStartMenu() {
            document.getElementById('start-menu').classList.toggle('open');
        }

        function updateTaskbar() {
            const container = document.getElementById('taskbar-icons');
            container.innerHTML = '';
            activeWindows.forEach(w => {
                const icon = document.createElement('div');
                icon.className = 'task-icon';
                icon.innerHTML = APPS[w.appId].icon;
                icon.onclick = () => focusWindow(w.id);
                container.appendChild(icon);
            });
        }

        function updateTime() {
            const now = new Date();
            document.getElementById('time').textContent = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            document.getElementById('date').textContent = now.toLocaleDateString();
        }

        function changeWallpaper() {
            const colors = ['#2c3e50', '#8e44ad', '#2980b9', '#16a085', '#27ae60'];
            document.body.style.background = colors[Math.floor(Math.random()*colors.length)];
        }

        // Event Listeners
        document.getElementById('start-btn').onclick = (e) => {
            e.stopPropagation();
            toggleStartMenu();
        };

        document.body.onclick = () => {
            document.getElementById('start-menu').classList.remove('open');
        };

        window.onload = init;
    </script>
</body>
</html>
