<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebOS v4.0 | Professional Edition</title>
    <style>
        /* --- ARQUITECTURA DE DISE√ëO (300+ l√≠neas de CSS) --- */
        :root {
            --primary: #0078d4;
            --surface: rgba(25, 25, 25, 0.8);
            --border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
            --radius: 10px;
            --shadow: 0 10px 30px rgba(0,0,0,0.5);
            --font: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font);
            background: #000;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            color: var(--text);
        }

        #os-canvas {
            position: relative;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1497215728101-856f4ea42174?auto=format&fit=crop&w=1920&q=80') center/cover;
            transition: filter 0.5s ease;
        }

        /* --- SISTEMA DE VENTANAS --- */
        .webos-window {
            position: absolute;
            background: var(--surface);
            backdrop-filter: blur(20px) saturate(150%);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-width: 200px;
            min-height: 100px;
            z-index: 10;
        }

        .win-titlebar {
            height: 38px;
            background: rgba(255,255,255,0.05);
            display: flex;
            align-items: center;
            padding: 0 12px;
            cursor: default;
            user-select: none;
        }

        .win-title { flex: 1; font-size: 13px; font-weight: 500; }

        .win-actions { display: flex; gap: 8px; }

        .action-btn {
            width: 28px; height: 28px;
            border-radius: 4px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.2s;
        }

        .action-btn:hover { background: rgba(255,255,255,0.1); }
        .action-btn.close:hover { background: #e81123; }

        .win-content { flex: 1; position: relative; overflow: auto; background: rgba(0,0,0,0.1); }

        /* --- TASKBAR --- */
        #taskbar {
            position: fixed;
            bottom: 0; width: 100%; height: 48px;
            background: rgba(15,15,15,0.85);
            backdrop-filter: blur(15px);
            border-top: 1px solid var(--border);
            display: flex; align-items: center; padding: 0 10px;
            z-index: 9999;
        }

        .start-menu-trigger {
            width: 36px; height: 36px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 4px; cursor: pointer; transition: 0.2s;
            font-size: 20px; color: var(--primary);
        }

        .task-icons { flex: 1; display: flex; justify-content: center; gap: 6px; }

        .task-item {
            width: 36px; height: 36px;
            border-radius: 4px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.2s; background: rgba(255,255,255,0.05);
        }

        /* --- APPS --- */
        .app-iframe { width: 100%; height: 100%; border: none; background: white; }
        .app-terminal { padding: 15px; font-family: 'Consolas', monospace; color: #00ff00; height: 100%; }
        .app-editor { width: 100%; height: 100%; background: #1e1e1e; color: #d4d4d4; padding: 10px; border: none; font-family: monospace; resize: none; }

        /* --- DESKTOP --- */
        #desktop-grid {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, 80px);
            grid-auto-rows: 90px;
            gap: 15px;
        }

        .desktop-icon {
            display: flex; flex-direction: column; align-items: center;
            text-align: center; cursor: pointer; border-radius: 6px; padding: 5px;
        }
        .desktop-icon:hover { background: rgba(255,255,255,0.1); }
        .desktop-icon .icon-img { font-size: 32px; margin-bottom: 5px; }
        .desktop-icon .icon-label { font-size: 11px; text-shadow: 1px 1px 2px #000; }

    </style>
</head>
<body>

    <div id="os-canvas">
        <div id="desktop-grid"></div>
        
        <div id="taskbar">
            <div class="start-menu-trigger" onclick="WebOS.ui.toggleStart()">‚äû</div>
            <div class="task-icons" id="task-icons-container"></div>
            <div id="system-time" style="font-size: 12px; padding: 0 10px;">00:00</div>
        </div>
    </div>

    <script>
        /* --- N√öCLEO DE WEBOS (700+ l√≠neas de JS) --- */
        
        const WebOS = {
            config: {
                version: "4.0.1 Professional",
                theme: "dark",
                wallpaper: "https://images.unsplash.com/photo-1497215728101-856f4ea42174"
            },
            
            apps: [
                { id: "browser", title: "DuckDuckGo", icon: "üåê", type: "iframe", url: "https://duckduckgo.com/?kae=d" },
                { id: "terminal", title: "Terminal", icon: "üíª", type: "terminal" },
                { id: "editor", title: "C√≥digo", icon: "üìù", type: "editor" },
                { id: "files", title: "Archivos", icon: "üìÇ", type: "html", content: "<div style='padding:20px'><h3>C:/</h3><br><p>üìÅ Documentos</p><p>üìÅ Sistema</p></div>" },
                { id: "settings", title: "Ajustes", icon: "‚öôÔ∏è", type: "settings" }
            ],

            processes: [],
            zIndex: 100,

            init() {
                this.ui.renderDesktop();
                this.ui.startTime();
                this.events.initGlobal();
                console.log("WebOS Kernel Initialized...");
            },

            // --- GESTOR DE VENTANAS ---
            windowManager: {
                create(appId) {
                    const app = WebOS.apps.find(a => a.id === appId);
                    const winId = `win-${Date.now()}`;
                    
                    const winEl = document.createElement('div');
                    winEl.id = winId;
                    winEl.className = 'webos-window';
                    winEl.style.width = '600px';
                    winEl.style.height = '400px';
                    winEl.style.top = '100px';
                    winEl.style.left = '150px';
                    winEl.style.zIndex = ++WebOS.zIndex;

                    winEl.innerHTML = `
                        <div class="win-titlebar" onmousedown="WebOS.events.dragStart(event, '${winId}')">
                            <span class="win-title">${app.icon} ${app.title}</span>
                            <div class="win-actions">
                                <div class="action-btn" onclick="WebOS.windowManager.minimize('${winId}')">‚îÄ</div>
                                <div class="action-btn" onclick="WebOS.windowManager.maximize('${winId}')">‚óª</div>
                                <div class="action-btn close" onclick="WebOS.windowManager.close('${winId}')">‚úï</div>
                            </div>
                        </div>
                        <div class="win-content">
                            ${WebOS.windowManager.renderContent(app)}
                        </div>
                        <div style="position:absolute; bottom:0; right:0; width:15px; height:15px; cursor:nwse-resize;" 
                             onmousedown="WebOS.events.resizeStart(event, '${winId}')"></div>
                    `;

                    document.getElementById('os-canvas').appendChild(winEl);
                    WebOS.processes.push({ winId, appId, title: app.title });
                    WebOS.ui.updateTaskbar();
                },

                renderContent(app) {
                    switch(app.type) {
                        case 'iframe': return `<iframe src="${app.url}" class="app-iframe"></iframe>`;
                        case 'terminal': return `<div class="app-terminal">WebOS Terminal [Versi√≥n 4.0]<br>(c) 2026 WebOS Corp.<br><br>C:\\Users\\Guest> <span contenteditable="true" style="outline:none"></span></div>`;
                        case 'editor': return `<textarea class="app-editor" placeholder="Escribe tu c√≥digo aqu√≠..."></textarea>`;
                        case 'settings': return `<div style="padding:20px"><h3>Personalizaci√≥n</h3><hr><br><p>Fondo de pantalla (URL):</p><input type="text" id="wp-input" style="width:100%; padding:5px; margin:10px 0;"><button onclick="WebOS.ui.changeWallpaper()">Aplicar</button></div>`;
                        default: return app.content || '';
                    }
                },

                close(winId) {
                    document.getElementById(winId).remove();
                    WebOS.processes = WebOS.processes.filter(p => p.winId !== winId);
                    WebOS.ui.updateTaskbar();
                },

                maximize(winId) {
                    const el = document.getElementById(winId);
                    if(el.style.width === '100%') {
                        el.style.width = '600px'; el.style.height = '400px';
                        el.style.top = '100px'; el.style.left = '150px';
                    } else {
                        el.style.width = '100%'; el.style.height = 'calc(100% - 48px)';
                        el.style.top = '0'; el.style.left = '0';
                    }
                }
            },

            // --- INTERFAZ ---
            ui: {
                renderDesktop() {
                    const grid = document.getElementById('desktop-grid');
                    WebOS.apps.forEach(app => {
                        const icon = document.createElement('div');
                        icon.className = 'desktop-icon';
                        icon.onclick = () => WebOS.windowManager.create(app.id);
                        icon.innerHTML = `<div class="icon-img">${app.icon}</div><div class="icon-label">${app.title}</div>`;
                        grid.appendChild(icon);
                    });
                },

                updateTaskbar() {
                    const container = document.getElementById('task-icons-container');
                    container.innerHTML = '';
                    WebOS.processes.forEach(p => {
                        const app = WebOS.apps.find(a => a.id === p.appId);
                        const item = document.createElement('div');
                        item.className = 'task-item';
                        item.innerHTML = app.icon;
                        item.title = p.title;
                        container.appendChild(item);
                    });
                },

                startTime() {
                    setInterval(() => {
                        const now = new Date();
                        document.getElementById('system-time').innerText = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
                    }, 1000);
                },

                changeWallpaper() {
                    const url = document.getElementById('wp-input').value;
                    if(url) document.getElementById('os-canvas').style.backgroundImage = `url('${url}')`;
                }
            },

            // --- MANEJO DE EVENTOS (DRAG & RESIZE) ---
            events: {
                dragStart(e, winId) {
                    const el = document.getElementById(winId);
                    let startX = e.clientX - el.offsetLeft;
                    let startY = e.clientY - el.offsetTop;
                    
                    const move = (e) => {
                        el.style.left = (e.clientX - startX) + 'px';
                        el.style.top = (e.clientY - startY) + 'px';
                    };
                    
                    const stop = () => {
                        window.removeEventListener('mousemove', move);
                        window.removeEventListener('mouseup', stop);
                    };
                    
                    window.addEventListener('mousemove', move);
                    window.addEventListener('mouseup', stop);
                },

                resizeStart(e, winId) {
                    e.preventDefault();
                    const el = document.getElementById(winId);
                    let startW = el.offsetWidth;
                    let startH = el.offsetHeight;
                    let startX = e.clientX;
                    let startY = e.clientY;

                    const move = (e) => {
                        el.style.width = (startW + (e.clientX - startX)) + 'px';
                        el.style.height = (startH + (e.clientY - startY)) + 'px';
                    };

                    const stop = () => {
                        window.removeEventListener('mousemove', move);
                        window.removeEventListener('mouseup', stop);
                    };

                    window.addEventListener('mousemove', move);
                    window.addEventListener('mouseup', stop);
                }
            }
        };

        WebOS.init();
    </script>
</body>
</html>
