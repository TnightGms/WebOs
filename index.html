<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebOS v5.01 - Professional</title>
    <style>
        :root {
            --primary: #00a2ff;
            --surface: rgba(20, 20, 25, 0.9);
            --border: rgba(255, 255, 255, 0.15);
            --text: #ffffff;
            --taskbar: rgba(10, 10, 12, 0.95);
            --win-bg: #1a1a1a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }

        body {
            background: #000;
            height: 100vh; width: 100vw;
            overflow: hidden;
            color: var(--text);
        }

        #os-screen {
            width: 100%; height: 100%;
            background: url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=1920&q=80') center/cover;
            position: relative;
        }

        /* --- MODAL DE NOVEDADES v5.01 --- */
        #welcome-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(10px);
            z-index: 999999; display: flex; align-items: center; justify-content: center;
        }

        .modal {
            background: var(--surface);
            width: 550px; padding: 40px; border-radius: 20px;
            border: 1px solid var(--border); box-shadow: 0 30px 60px rgba(0,0,0,0.8);
            transform: scale(1); transition: 0.3s;
        }

        .modal h2 { color: var(--primary); margin-bottom: 20px; }
        .modal ul { list-style: none; margin-bottom: 25px; }
        .modal li { margin-bottom: 12px; font-size: 14px; display: flex; align-items: center; }
        .modal li::before { content: 'üöÄ'; margin-right: 10px; }

        .btn-start {
            background: var(--primary); color: white; border: none;
            padding: 12px 30px; border-radius: 8px; cursor: pointer;
            font-weight: bold; width: 100%; font-size: 16px;
        }

        /* --- VENTANAS --- */
        .window {
            position: absolute; background: var(--surface);
            backdrop-filter: blur(20px); border: 1px solid var(--border);
            border-radius: 12px; display: flex; flex-direction: column;
            min-width: 300px; min-height: 200px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .titlebar {
            height: 40px; padding: 0 15px; display: flex; align-items: center;
            background: rgba(255,255,255,0.05); cursor: grab;
        }

        .controls { display: flex; gap: 8px; margin-left: auto; }
        .btn-win { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; }
        .close { background: #ff5f57; } .max { background: #28c840; } .min { background: #febc2e; }

        .content { flex: 1; overflow: hidden; position: relative; background: var(--win-bg); }

        /* --- TASKBAR --- */
        #taskbar {
            position: absolute; bottom: 0; width: 100%; height: 50px;
            background: var(--taskbar); backdrop-filter: blur(15px);
            display: flex; align-items: center; padding: 0 15px; z-index: 1000000;
            border-top: 1px solid var(--border);
        }

        #start-btn {
            font-size: 24px; cursor: pointer; color: var(--primary);
            width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
            transition: 0.2s;
        }
        #start-btn:hover { transform: scale(1.2); }

        /* --- START MENU --- */
        #start-menu {
            position: absolute; bottom: 60px; left: 10px;
            width: 300px; height: 400px; background: var(--surface);
            border-radius: 15px; border: 1px solid var(--border);
            display: none; padding: 20px; z-index: 1000001;
        }
        #start-menu.active { display: block; animation: slideUp 0.3s ease; }

        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* --- DESKTOP --- */
        #icons-grid {
            padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, 90px);
            grid-auto-rows: 100px; gap: 15px;
        }
        .icon-unit {
            display: flex; flex-direction: column; align-items: center;
            cursor: pointer; padding: 10px; border-radius: 10px; transition: 0.2s;
        }
        .icon-unit:hover { background: rgba(255,255,255,0.1); }
        .icon-unit span:first-child { font-size: 40px; margin-bottom: 5px; }
        .icon-unit span:last-child { font-size: 12px; text-align: center; }

    </style>
</head>
<body>

    <div id="os-screen">
        <div id="welcome-screen">
            <div class="modal">
                <h2>WebOS v5.01 Hotfix</h2>
                <ul>
                    <li><strong>Error Solucionado:</strong> El bot√≥n de Inicio ahora es funcional.</li>
                    <li><strong>Error Solucionado:</strong> Las aplicaciones ahora se abren correctamente.</li>
                    <li><strong>Novedad:</strong> Panel de "Soluci√≥n de Errores" a√±adido al men√∫.</li>
                    <li><strong>Novedad:</strong> Soporte mejorado para DuckDuckGo.</li>
                    <li><strong>Novedad:</strong> Sistema de z-index autom√°tico corregido.</li>
                </ul>
                <button class="btn-start" onclick="closeWelcome()">Entendido y Corregido</button>
            </div>
        </div>

        <div id="icons-grid"></div>

        <div id="start-menu">
            <h3 style="margin-bottom: 15px; border-bottom: 1px solid #444;">Men√∫ Principal</h3>
            <div id="menu-items"></div>
        </div>

        <div id="taskbar">
            <div id="start-btn" onclick="toggleStart()">‚äû</div>
            <div id="running-apps" style="flex: 1; display: flex; margin-left: 20px; gap: 10px;"></div>
            <div id="clock">00:00:00</div>
        </div>
    </div>

    <script>
        /**
         * KERNEL v5.01 - L√ìGICA DE REPARACI√ìN
         */
        const OS = {
            status: "Running",
            apps: [
                { id: 'browser', name: 'Navegador', icon: 'üåê', url: 'https://duckduckgo.com' },
                { id: 'debug', name: 'Soluci√≥n Errores', icon: 'üõ†Ô∏è', content: '<div style="padding:20px"><h3>WebOS Debugger</h3><p>Estado: Sistema Operativo OK</p><p>Versi√≥n: 5.01 Stable</p><br><button onclick="location.reload()" style="padding:5px">Reiniciar Kernel</button></div>' },
                { id: 'notes', name: 'Bloc Notas', icon: 'üìù', content: '<textarea style="width:100%;height:100%;padding:15px;background:#000;color:#fff;border:none;"></textarea>' },
                { id: 'terminal', name: 'Consola', icon: '‚å®Ô∏è', content: '<div style="padding:15px;color:#0f0;font-family:monospace">> WebOS v5.01 Boot OK...<br>> Type "help" for info.<br>> _</div>' }
            ],
            zIndex: 1000,

            init() {
                this.renderIcons();
                this.updateTime();
                setInterval(this.updateTime, 1000);
            },

            renderIcons() {
                const grid = document.getElementById('icons-grid');
                const menu = document.getElementById('menu-items');
                
                this.apps.forEach(app => {
                    // Iconos Escritorio
                    const div = document.createElement('div');
                    div.className = 'icon-unit';
                    div.innerHTML = `<span>${app.icon}</span><span>${app.name}</span>`;
                    div.onclick = () => this.openApp(app.id);
                    grid.appendChild(div);

                    // Iconos Men√∫ Inicio
                    const menuDiv = document.createElement('div');
                    menuDiv.style.cssText = "padding: 10px; cursor: pointer; border-radius: 5px;";
                    menuDiv.innerHTML = `${app.icon} ${app.name}`;
                    menuDiv.onclick = () => { this.openApp(app.id); toggleStart(); };
                    menuDiv.onmouseover = () => menuDiv.style.background = "rgba(255,255,255,0.1)";
                    menuDiv.onmouseout = () => menuDiv.style.background = "transparent";
                    menu.appendChild(menuDiv);
                });
            },

            openApp(id) {
                const app = this.apps.find(a => a.id === id);
                const winId = 'win_' + Math.floor(Math.random() * 9999);
                
                const win = document.createElement('div');
                win.id = winId;
                win.className = 'window';
                win.style.width = '600px'; win.style.height = '400px';
                win.style.top = '100px'; win.style.left = '100px';
                win.style.zIndex = ++this.zIndex;

                win.innerHTML = `
                    <div class="titlebar" onmousedown="OS.dragStart(event, '${winId}')">
                        <span>${app.icon} ${app.name}</span>
                        <div class="controls">
                            <div class="btn-win min" onclick="OS.closeApp('${winId}')"></div>
                            <div class="btn-win max" onclick="OS.maximizeApp('${winId}')"></div>
                            <div class="btn-win close" onclick="OS.closeApp('${winId}')"></div>
                        </div>
                    </div>
                    <div class="content">
                        ${app.url ? `<iframe src="${app.url}" style="width:100%;height:100%;border:none;background:#fff;"></iframe>` : app.content}
                    </div>
                    <div style="position:absolute;bottom:0;right:0;width:15px;height:15px;cursor:nwse-resize;" onmousedown="OS.resizeStart(event, '${winId}')"></div>
                `;

                document.getElementById('os-screen').appendChild(win);
            },

            closeApp(id) { document.getElementById(id).remove(); },

            maximizeApp(id) {
                const el = document.getElementById(id);
                if(el.style.width === '100%') {
                    el.style.width = '600px'; el.style.height = '400px';
                } else {
                    el.style.width = '100%'; el.style.height = 'calc(100% - 50px)';
                    el.style.top = '0'; el.style.left = '0';
                }
            },

            dragStart(e, id) {
                const el = document.getElementById(id);
                el.style.zIndex = ++this.zIndex;
                let offsetX = e.clientX - el.offsetLeft;
                let offsetY = e.clientY - el.offsetTop;

                const move = (e) => {
                    el.style.left = (e.clientX - offsetX) + 'px';
                    el.style.top = (e.clientY - offsetY) + 'px';
                };
                const up = () => { 
                    window.removeEventListener('mousemove', move);
                    window.removeEventListener('mouseup', up);
                };
                window.addEventListener('mousemove', move);
                window.addEventListener('mouseup', up);
            },

            resizeStart(e, id) {
                const el = document.getElementById(id);
                let startW = el.offsetWidth;
                let startH = el.offsetHeight;
                let startX = e.clientX;
                let startY = e.clientY;

                const move = (e) => {
                    el.style.width = (startW + (e.clientX - startX)) + 'px';
                    el.style.height = (startH + (e.clientY - startY)) + 'px';
                };
                const up = () => { 
                    window.removeEventListener('mousemove', move);
                    window.removeEventListener('mouseup', up);
                };
                window.addEventListener('mousemove', move);
                window.addEventListener('mouseup', up);
            },

            updateTime() {
                const now = new Date();
                document.getElementById('clock').innerText = now.toLocaleTimeString();
            }
        };

        // Funciones Globales
        function toggleStart() {
            document.getElementById('start-menu').classList.toggle('active');
        }

        function closeWelcome() {
            document.getElementById('welcome-screen').style.display = 'none';
        }

        // Auto-Init
        OS.init();

    </script>
</body>
</html>
