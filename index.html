<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WebOS - Windows Like</title>
<style>
  /* Reset */
  * { margin:0; padding:0; box-sizing:border-box; font-family:sans-serif; user-select:none; }
  html, body { width:100%; height:100%; overflow:hidden; }

  /* Pantalla de inicio */
  #welcome-screen {
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    width:100%; height:100%; background:#0078d7; color:white;
  }
  #welcome-screen input, #welcome-screen button {
    margin:5px; padding:10px; border:none; border-radius:5px;
  }

  /* Escritorio */
  #desktop {
    display:none; width:100%; height:100%; position:relative;
    background-size:cover; background-position:center; overflow:hidden;
  }

  /* Barra de tareas */
  #taskbar {
    position:absolute; bottom:0; left:0; width:100%; height:40px;
    background:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:space-between; padding:0 10px;
    color:white; font-size:14px;
  }
  #start-menu { cursor:pointer; }
  #clock { margin-left:auto; }

  /* Ventanas */
  .window {
    position:absolute; background:white; border:1px solid #666; border-radius:5px;
    width:300px; height:200px; display:none; flex-direction:column;
    box-shadow:0 4px 10px rgba(0,0,0,0.5);
    overflow:hidden;
  }
  .window-header {
    background:#0078d7; color:white; padding:5px; cursor:move; display:flex; justify-content:space-between; align-items:center;
  }
  .window-header button {
    background:red; border:none; border-radius:3px; width:20px; height:20px; color:white; cursor:pointer;
  }
  .window-content { flex:1; padding:5px; overflow:auto; background:#f0f0f0; }

  /* Desktop icons */
  .desktop-icon {
    width:60px; text-align:center; margin:10px; cursor:pointer; display:inline-block;
    color:white; font-size:12px;
  }
  .desktop-icon img { width:48px; height:48px; }

</style>
</head>
<body>

<!-- Pantalla de inicio -->
<div id="welcome-screen">
  <h1>Bienvenido a WebOS</h1>
  <input type="text" id="username" placeholder="Ingresa tu nombre">
  <input type="file" id="wallpaper" accept="image/*">
  <button id="enter-desktop">Entrar</button>
</div>

<!-- Escritorio -->
<div id="desktop">
  <!-- Barra de tareas -->
  <div id="taskbar">
    <div id="start-menu">Inicio</div>
    <div id="clock"></div>
  </div>

  <!-- Iconos en escritorio -->
  <div id="icons-container" style="padding:10px; position:absolute; top:10px; left:10px;">
    <div class="desktop-icon" data-app="notes">
      <img src="https://cdn-icons-png.flaticon.com/512/1828/1828911.png">
      <div>Notas</div>
    </div>
    <div class="desktop-icon" data-app="calculator">
      <img src="https://cdn-icons-png.flaticon.com/512/742/742751.png">
      <div>Calculadora</div>
    </div>
    <div class="desktop-icon" data-app="terminal">
      <img src="https://cdn-icons-png.flaticon.com/512/1087/1087841.png">
      <div>Terminal</div>
    </div>
    <div class="desktop-icon" data-app="browser">
      <img src="https://cdn-icons-png.flaticon.com/512/888/888859.png">
      <div>Navegador</div>
    </div>
    <div class="desktop-icon" data-app="paint">
      <img src="https://cdn-icons-png.flaticon.com/512/3290/3290063.png">
      <div>Paint</div>
    </div>
  </div>

  <!-- Ventanas -->
  <div class="window" id="notes">
    <div class="window-header">
      <span>Notas</span>
      <button onclick="closeWindow('notes')">✖</button>
    </div>
    <div class="window-content">
      <textarea id="notes-content" style="width:100%; height:100%;"></textarea>
    </div>
  </div>

  <div class="window" id="calculator">
    <div class="window-header">
      <span>Calculadora</span>
      <button onclick="closeWindow('calculator')">✖</button>
    </div>
    <div class="window-content">
      <input type="text" id="calc-display" readonly style="width:100%; padding:5px; margin-bottom:5px;">
      <div>
        <button onclick="pressCalc('1')">1</button>
        <button onclick="pressCalc('2')">2</button>
        <button onclick="pressCalc('3')">3</button>
        <button onclick="pressCalc('+')">+</button>
      </div>
      <div>
        <button onclick="pressCalc('4')">4</button>
        <button onclick="pressCalc('5')">5</button>
        <button onclick="pressCalc('6')">6</button>
        <button onclick="pressCalc('-')">-</button>
      </div>
      <div>
        <button onclick="pressCalc('7')">7</button>
        <button onclick="pressCalc('8')">8</button>
        <button onclick="pressCalc('9')">9</button>
        <button onclick="pressCalc('*')">×</button>
      </div>
      <div>
        <button onclick="pressCalc('0')">0</button>
        <button onclick="pressCalc('.')">.</button>
        <button onclick="calculate()">=</button>
        <button onclick="pressCalc('/')">÷</button>
      </div>
    </div>
  </div>

  <div class="window" id="terminal">
    <div class="window-header">
      <span>Terminal</span>
      <button onclick="closeWindow('terminal')">✖</button>
    </div>
    <div class="window-content" style="background:black; color:#0f0; font-family:monospace; height:100%;">
      <div id="terminal-output" style="height:calc(100% - 30px); overflow:auto;"></div>
      <input id="terminal-input" type="text" style="width:100%; padding:5px; background:black; color:#0f0; border:none;" placeholder="Comando">
    </div>
  </div>

  <div class="window" id="browser">
    <div class="window-header">
      <span>Navegador</span>
      <button onclick="closeWindow('browser')">✖</button>
    </div>
    <div class="window-content">
      <iframe src="https://example.com" style="width:100%; height:100%; border:none;"></iframe>
    </div>
  </div>

  <div class="window" id="paint">
    <div class="window-header">
      <span>Paint</span>
      <button onclick="closeWindow('paint')">✖</button>
    </div>
    <div class="window-content">
      <canvas id="paint-canvas" width="400" height="300" style="border:1px solid #000;"></canvas>
      <br>
      <input type="color" id="paint-color" value="#000000">
      <input type="range" id="paint-size" min="1" max="10" value="2">
    </div>
  </div>

</div>

<script>
  // Variables
  let currentUser = '';
  const desktop = document.getElementById('desktop');

  // Pantalla de inicio
  document.getElementById('enter-desktop').onclick = () => {
    const name = document.getElementById('username').value.trim();
    if(!name){ alert('Ingresa tu nombre'); return; }
    currentUser = name;
    // Fondo
    const file = document.getElementById('wallpaper').files[0];
    if(file){
      const reader = new FileReader();
      reader.onload = e => {
        desktop.style.backgroundImage = `url(${e.target.result})`;
        localStorage.setItem('wallpaper', e.target.result);
      }
      reader.readAsDataURL(file);
    } else {
      const saved = localStorage.getItem('wallpaper');
      if(saved) desktop.style.backgroundImage = `url(${saved})`;
    }
    document.getElementById('welcome-screen').style.display='none';
    desktop.style.display='block';
    updateClock();
  };

  // Reloj
  function updateClock(){
    const now = new Date();
    document.getElementById('clock').innerText = now.toLocaleTimeString();
    setTimeout(updateClock,1000);
  }

  // Dock y iconos
  document.querySelectorAll('.desktop-icon').forEach(icon => {
    icon.onclick = () => openWindow(icon.dataset.app);
  });

  function openWindow(id){
    const win = document.getElementById(id);
    win.style.display='flex';
    win.style.top='100px';
    win.style.left='100px';
    dragElement(win);
  }
  function closeWindow(id){ document.getElementById(id).style.display='none'; }

  // Ventanas movibles
  function dragElement(el) {
    const header = el.querySelector('.window-header');
    let offsetX=0, offsetY=0, mouseX=0, mouseY=0;
    header.onmousedown = dragMouseDown;
    function dragMouseDown(e){
      e.preventDefault();
      mouseX = e.clientX;
      mouseY = e.clientY;
      document.onmouseup = closeDrag;
      document.onmousemove = elementDrag;
    }
    function elementDrag(e){
      offsetX = mouseX - e.clientX;
      offsetY = mouseY - e.clientY;
      mouseX = e.clientX;
      mouseY = e.clientY;
      el.style.top = (el.offsetTop - offsetY) + "px";
      el.style.left = (el.offsetLeft - offsetX) + "px";
    }
    function closeDrag(){ document.onmouseup=null; document.onmousemove=null; }
  }

  // Calculadora
  let calcValue='';
  function pressCalc(val){ calcValue+=val; document.getElementById('calc-display').value=calcValue; }
  function calculate(){ try{ calcValue=eval(calcValue).toString(); }catch(e){ calcValue='Error'; } document.getElementById('calc-display').value=calcValue; }

  // Terminal
  const termInput = document.getElementById('terminal-input');
  const termOutput = document.getElementById('terminal-output');
  termInput.addEventListener('keypress', e=>{
    if(e.key==='Enter'){
      const cmd = termInput.value;
      termOutput.innerHTML += `<div>$ ${cmd}</div>`;
      if(cmd==='help') termOutput.innerHTML += '<div>Comandos: help, date, echo [texto], clear</div>';
      else if(cmd==='date') termOutput.innerHTML += `<div>${new Date()}</div>`;
      else if(cmd.startsWith('echo ')) termOutput.innerHTML += `<div>${cmd.slice(5)}</div>`;
      else if(cmd==='clear') termOutput.innerHTML='';
      else termOutput.innerHTML += '<div>Comando no reconocido</div>';
      termInput.value='';
      termOutput.scrollTop = termOutput.scrollHeight;
    }
  });

  // Notas
  const notesArea = document.getElementById('notes-content');
  notesArea.addEventListener('input', ()=>{
    localStorage.setItem(currentUser+'_notes', notesArea.value);
  });
  const savedNotes = localStorage.getItem(currentUser+'_notes');
  if(savedNotes) notesArea.value = savedNotes;

  // Paint
  const canvas = document.getElementById('paint-canvas');
  const ctx = canvas.getContext('2d');
  let painting=false;
  canvas.addEventListener('mousedown',()=>painting=true);
  canvas.addEventListener('mouseup',()=>painting=false);
  canvas.addEventListener('mousemove', draw);
  function draw(e){
    if(!painting) return;
    ctx.fillStyle = document.getElementById('paint-color').value;
    const size = document.getElementById('paint-size').value;
    ctx.beginPath();
    ctx.arc(e.offsetX,e.offsetY,size,0,Math.PI*2);
    ctx.fill();
  }
</script>

</body>
</html>
